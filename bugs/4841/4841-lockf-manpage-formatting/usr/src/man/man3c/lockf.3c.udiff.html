<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="cache-control" content="no-cache"></meta>
<meta http-equiv="Pragma" content="no-cache"></meta>
<meta http-equiv="Expires" content="-1"></meta>
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
span.chmod {
    font-size: 0.7em;
    color: #db7800;
}
a.print { font-size: x-small; }
a:hover { background-color: #ffcc99; }
</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>4841-lockf-manpage-formatting Udiff usr/src/man/man3c/lockf.3c</title>

<style type="text/css" media="screen">
span.new {
    color: blue;
    font-weight: normal;
}
</style>

</head>
<body id="SUNWwebrev">
        <a class="print" href="javascript:print()">Print this page</a>
<pre><a href="https://illumos.org/issues/4841">4841</a> - lockf(3c): Minor formatting issues in man page</pre>
        <pre>
</pre><hr></hr><pre>
<span class="newmarker">@@ -33,12 +33,12 @@</span>
 The \fIfildes\fR argument is an open file descriptor. The file descriptor must
 have \fBO_WRONLY\fR or \fBO_RDWR\fR permission in order to establish locks with
 this function call.
 .sp
 .LP
<span class="removed">-The \fBfunction\fR argument is a control value that specifies the action to be</span>
<span class="removed">-taken. The permissible values for \fBfunction\fR are defined in</span>
<span class="new">+The \fIfunction\fR argument is a control value that specifies the action to be</span>
<span class="new">+taken. The permissible values for \fIfunction\fR are defined in</span>
 &lt;\fBunistd.h\fR&gt; as follows:
 .sp
 .in +2
 .nf
 #define   F_ULOCK   0   /* unlock previously locked section */
</pre><hr></hr><pre>
<span class="newmarker">@@ -48,34 +48,34 @@</span>
 .fi
 .in -2
 
 .sp
 .LP
<span class="removed">-All other values of \fBfunction\fR are reserved for future extensions and will</span>
<span class="new">+All other values of \fIfunction\fR are reserved for future extensions and will</span>
 result in an error if not implemented.
 .sp
 .LP
 \fBF_TEST\fR is used to detect if a lock by another process is present on the
 specified section. \fBF_LOCK\fR and \fBF_TLOCK\fR both lock a section of a file
 if the section is available. \fBF_ULOCK\fR removes locks from a section of the
 file.
 .sp
 .LP
<span class="removed">-The \fBsize\fR argument is the number of contiguous bytes to be locked or</span>
<span class="new">+The \fIsize\fR argument is the number of contiguous bytes to be locked or</span>
 unlocked. The resource to be locked or unlocked starts at the current offset in
<span class="removed">-the file and extends forward for a positive size and backward for a negative</span>
<span class="removed">-size (the preceding bytes up to but not including the current offset). If</span>
<span class="removed">-\fBsize\fR is zero, the section from the current offset through the largest</span>
<span class="new">+the file and extends forward for a positive \fIsize\fR and backward for a negative</span>
<span class="new">+\fIsize\fR (the preceding bytes up to but not including the current offset). If</span>
<span class="new">+\fIsize\fR is zero, the section from the current offset through the largest</span>
 file offset is locked (that is, from the current offset through the present or
 any future end-of-file). An area need not be allocated to the file in order to
 be locked as such locks may exist past the end-of-file.
 .sp
 .LP
 The sections locked with \fBF_LOCK\fR or \fBF_TLOCK\fR may, in whole or in
 part, contain or be contained by a previously locked section for the same
 process.  Locked sections will be unlocked starting at the point of the offset
<span class="removed">-through \fBsize\fR bytes or to the end of file if \fBsize\fR is (\fBoff_t\fR)</span>
<span class="new">+through \fIsize\fR bytes or to the end of file if \fIsize\fR is (\fBoff_t\fR)</span>
 0. When this situation occurs, or if this situation occurs in adjacent
 sections, the sections are combined into a single section. If the request
 requires that a new element be added to the table of active locks and this
 table is already full, an error is returned, and the new section is not locked.
 .sp
</pre><hr></hr><pre>
<span class="newmarker">@@ -97,15 +97,15 @@</span>
 section of a locked section requires an additional element in the table of
 active locks. If this table is full, an \fBerrno\fR is set to \fBEDEADLK\fR and
 the requested section is not released.
 .sp
 .LP
<span class="removed">-An \fBF_ULOCK\fR request in which \fBsize\fR is non-zero and the offset of the</span>
<span class="new">+An \fBF_ULOCK\fR request in which \fIsize\fR is non-zero and the offset of the</span>
 last byte of the requested section is the maximum value for an object of type
<span class="removed">-\fBoff_t\fR, when the process has an existing lock in which \fBsize\fR is 0 and</span>
<span class="new">+\fBoff_t\fR, when the process has an existing lock in which \fIsize\fR is 0 and</span>
 which includes the last byte of the requested section, will be treated as a
<span class="removed">-request to unlock from the start of the requested section with a size equal to</span>
<span class="new">+request to unlock from the start of the requested section with a \fIsize\fR equal to</span>
 0. Otherwise, an \fBF_ULOCK\fR request will attempt to unlock only the
 requested section.
 .sp
 .LP
 A potential for deadlock occurs if the threads of a process controlling a
</pre><hr></hr><pre>
<span class="newmarker">@@ -132,31 +132,31 @@</span>
 .na
 \fB\fBEBADF\fR\fR
 .ad
 .RS 20n
 The \fIfildes\fR argument is not a valid open file descriptor; or
<span class="removed">-\fBfunction\fR is \fBF_LOCK\fR or \fBF_TLOCK\fR and \fIfildes\fR is not a valid</span>
<span class="new">+\fIfunction\fR is \fBF_LOCK\fR or \fBF_TLOCK\fR and \fIfildes\fR is not a valid</span>
 file descriptor open for writing.
 .RE
 
 .sp
 .ne 2
 .na
 \fB\fBEACCES\fR or \fBEAGAIN\fR\fR
 .ad
 .RS 20n
<span class="removed">-The \fBfunction\fR argument is \fBF_TLOCK\fR or \fBF_TEST\fR and the section is</span>
<span class="new">+The \fIfunction\fR argument is \fBF_TLOCK\fR or \fBF_TEST\fR and the section is</span>
 already locked by another process.
 .RE
 
 .sp
 .ne 2
 .na
 \fB\fBEDEADLK\fR\fR
 .ad
 .RS 20n
<span class="removed">-The \fBfunction\fR argument is \fBF_LOCK\fR and a deadlock is detected.</span>
<span class="new">+The \fIfunction\fR argument is \fBF_LOCK\fR and a deadlock is detected.</span>
 .RE
 
 .sp
 .ne 2
 .na
</pre><hr></hr><pre>
<span class="newmarker">@@ -180,22 +180,22 @@</span>
 .ne 2
 .na
 \fB\fBEINVAL\fR\fR
 .ad
 .RS 20n
<span class="removed">-The \fBfunction\fR argument is not one of \fBF_LOCK\fR, \fBF_TLOCK\fR,</span>
<span class="removed">-\fBF_TEST\fR, or \fBF_ULOCK\fR; or \fBsize\fR plus the current file offset is</span>
<span class="new">+The \fIfunction\fR argument is not one of \fBF_LOCK\fR, \fBF_TLOCK\fR,</span>
<span class="new">+\fBF_TEST\fR, or \fBF_ULOCK\fR; or \fIsize\fR plus the current file offset is</span>
 less than 0.
 .RE
 
 .sp
 .ne 2
 .na
 \fB\fBEOVERFLOW\fR\fR
 .ad
 .RS 20n
<span class="removed">-The offset of the first, or if \fBsize\fR is not 0 then the last, byte in the</span>
<span class="new">+The offset of the first, or if \fIsize\fR is not 0 then the last, byte in the</span>
 requested section cannot be represented correctly in an object of type
 \fBoff_t\fR.
 .RE
 
 .sp
</pre><hr></hr><pre>
<span class="newmarker">@@ -205,21 +205,21 @@</span>
 .ne 2
 .na
 \fB\fBEAGAIN\fR\fR
 .ad
 .RS 24n
<span class="removed">-The \fBfunction\fR argument is \fBF_LOCK\fR or \fBF_TLOCK\fR and the file is</span>
<span class="new">+The \fIfunction\fR argument is \fBF_LOCK\fR or \fBF_TLOCK\fR and the file is</span>
 mapped with \fBmmap\fR(2).
 .RE
 
 .sp
 .ne 2
 .na
 \fB\fBEDEADLK\fR or \fBENOLCK\fR\fR
 .ad
 .RS 24n
<span class="removed">-The \fBfunction\fR argument is \fBF_LOCK\fR, \fBF_TLOCK\fR, or \fBF_ULOCK\fR</span>
<span class="new">+The \fIfunction\fR argument is \fBF_LOCK\fR, \fBF_TLOCK\fR, or \fBF_ULOCK\fR</span>
 and the request would cause the number of locks to exceed a system-imposed
 limit.
 .RE
 
 .sp
</pre></body></html>

